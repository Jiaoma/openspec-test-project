# Todo App - Team Collaboration（高级版）

> 基于用户需求的高级多功能任务管理应用

---

## 📋 需求总结

| 类别 | 选择 |
|------|------|
| **功能版本** | 高级版 |
| **界面风格** | 简约现代 |
| **数据存储** | 浏览器本地（需要多用户切换支持） |
| **用户类型** | 团队协作 |
| **特色需求** | 月度目标完成进度统计 |

---

## 🔧 技术约束说明

⚠️ **关于团队协作 + 本地存储的兼容性问题**

浏览器 localStorage 数据**只能保存在当前设备上**，不支持跨设备共享。
为解决此问题，本应用采用以下方案：

**方案选择**：**多用户角色切换**（Single Device Team Mode）
- ✅ 支持多个团队成员同时使用同一设备
- ✅ 可以在"团队视图"下查看所有成员任务
- ✅ 支持在"个人视图"和"团队视图"之间切换
- ❌ **不支持**真正的跨设备实时同步（需后端服务器）

> 📌 如需真正的跨设备同步，请选择"云端同步"方案。

---

## 1️⃣ 核心功能需求

### 1.1 用户管理
- [ ] 添加多个用户（团队成员）
- [ ] 设置用户名和头像（使用随机头像或上传）
- [ ] 切换当前用户角色
- [ ] 用户数据隔离（每个用户只能看到自己的任务）

### 1.2 任务管理
**基础功能**：
- [ ] 添加任务（输入框支持空格和回车）
- [ ] 编辑任务文本
- [ ] 删除任务
- [ ] 标记完成/未完成

**高级功能**：
- [ ] 任务优先级设置（高/中/低）
- [ ] 任务分类/项目分类（支持无限层级）
- [ ] 任务截止日期（包含闹钟提醒）
- [ ] 任务依赖关系（A完成任务后触发B提醒）
- [ ] 任务描述和备注

**团队协作功能**：
- [ ] 分配任务给团队成员
- [ ] 查看任务的分配者
- [ ] 团队视图查看所有成员任务

### 1.3 团队协作
- [ ] 团队视图模式（查看所有人任务）
- [ ] 团队过滤器（按成员筛选任务）
- [ ] 团队任务统计
- [ ] 任务协作（在任务下添加备注/评论）

### 1.4 统计功能
**月度目标统计**：
- [ ] 月度任务完成率统计
- [ ] 任务完成进度条（按周显示）
- [ ] 完成度可视化图表（饼图/进度条）
- [ ] 月度最佳表现用户
- [ ] 任务类型分布统计

### 1.5 目标管理
- [ ] 月度目标创建（可设置月度KPI）
- [ ] 目标关联任务
- [ ] 目标进度跟踪
- [ ] 月度总结报告

---

## 2️⃣ 技术要求

### 2.1 文件结构
```
todo-app/
├── index.html           # 主应用页面
├── styles.css           # 样式设计
├── app.js               # 应用逻辑
└── assets/              # 静态资源（头像、图标等）
```

### 2.2 技术栈
- 纯 HTML5
- 纯 CSS3
- 原生 JavaScript (ES6+)
- 使用 `localStorage` 保存数据
- 图表库：可以使用 ECharts 或 Chart.js（请用 CDN 引入）

### 2.3 数据格式

**用户数据**：
```json
{
  "users": [
    {
      "id": "u1",
      "name": "张三",
      "avatar": "https://i.pravatar.cc/150?u=u1"
    }
  ]
}
```

**任务数据**：
```json
{
  "tasks": [
    {
      "id": "t1",
      "text": "完成报告",
      "completed": false,
      "priority": "high", // high/medium/low
      "category": "工作",
      "dueDate": "2023-12-31T18:00:00",
      "assignee": "u1", // 分配给谁
      "description": "详细描述...",
      "recurring": false,
      "createdAt": "2023-01-01T00:00:00"
    }
  ]
}
```

**统计数据**：
```json
{
  "stats": {
    "monthly": {
      "2023-12": {
        "completionRate": 85,
        "completedTasks": 15,
        "totalTasks": 18,
        "tasksByCategory": {
          "工作": 10,
          "学习": 6,
          "生活": 2
        }
      }
    }
  }
}
```

### 2.4 响应式设计

- ✅ 支持桌面端（≥1024px）
- ✅ 支持平板端（768px - 1024px）
- ✅ 支持移动端（<768px）
- ✅ 页面自适应布局（Flexbox/Grid）

### 2.5 用户体验

- ✅ 快捷键支持
  - `Ctrl/Cmd + N`：添加任务
  - `Ctrl/Cmd + /`：搜索任务
  - `Ctrl/Cmd + D`：删除任务
  - `Ctrl/Cmd + E`：编辑任务

- ✅ 自动保存（localStorage 每30秒自动保存）
- ✅ 无原生 alert，使用自定义提示框
- ✅ 加载动画
- ✅ 拖拽排序（可选，使用 Sortable.js）

---

## 3️⃣ UI 设计规范

### 3.1 整体布局

```
┌─────────────────────────────────────────────────────────────┐
│  Header                                  [⚙️ 设置] [👤 用户切换]  │
├─────────────────────────────────────────────────────────────┤
│  Stats          ┌─────────────────────────────────────────┐  │
│  [年度/月度]    │                                         │  │
│  [⭐ 统计看板]  │          主内容区域                     │  │
│                 │                                         │  │
│  Categories     │    ┌──────────┐  ┌──────────┐            │  │
│  📁 个人任务    │    │ 任务输入框│  │过滤搜索栏 │            │  │
│  📁 团队视图    │    └──────────┘  └──────────┘            │  │
│                 │                                         │  │
│  Tasks          │    ┌─ 任务卡片 ──┐                       │  │
│  [🔄 添加任务]  │    │ ✅ 完成    │  📝 编辑  🗑️ 删除        │  │
│  [📋 任务列表]  │    └────────────┘                       │  │
│                 │    ┌─ 任务卡片 ──┐                       │  │
│  Goals          │    │ 🎯 月度目标│  📊 进度            │  │
│  [📉 进度追踪]  │    └────────────┘                       │  │
│                 │                                         │  │
└─────────────────┴─────────────────────────────────────────┘
```

### 3.2 颜色方案

```css
/* 核心颜色 */
--primary-color: #007AFF;        /* 主色调：蓝色 */
--success-color: #34C759;        /* 成功：绿色 */
--warning-color: #FF9500;        /* 警告：橙色 */
--danger-color: #FF3B30;         /* 危险：红色 */
--text-primary: #1D1D1F;         /* 主文本：深灰 */
--text-secondary: #86868B;       /* 次文本：浅灰 */
--bg-primary: #FFFFFF;           /* 主背景：白 */
--bg-secondary: #F5F5F7;         /* 次背景：浅灰 */
--border-color: #E5E5EA;         /* 边框颜色 */
```

### 3.3 字体

```css
/* 推荐使用系统字体栈 */
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
```

### 3.4 组件样式

**任务卡片**：
```css
.task-card {
    padding: 12px 16px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 8px;
}

.task-card.completed .task-text {
    text-decoration: line-through;
    color: var(--text-secondary);
}

.task-priority {
    width: 12px;
    height: 12px;
    border-radius: 50%;
}

.priority-high { background: var(--danger-color); }
.priority-medium { background: var(--warning-color); }
.priority-low { background: var(--success-color); }
```

**统计看板**：
```css
.stats-dashboard {
    background: linear-gradient(135deg, #007AFF 0%, #5AC8FA 100%);
    color: white;
    padding: 24px;
    border-radius: 16px;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-top: 16px;
}
```

### 3.5 响应式布局

**桌面端（≥1024px）**：
- 左侧：侧边栏（导航 + 分类）
- 中间：主内容区（任务列表）
- 右侧：统计看板（可选）

**平板端（768 - 1024px）**：
- 顶部：导航栏
- 中间：主要内容区（上下布局）
- 统计栏：横向排列

**移动端（<768px）**：
- 顶部：导航栏（简化版）
- 主要内容：单列布局
- 卡片式设计，节省空间

---

## 4️⃣ 验收标准

### 🎯 功能验收

- [ ] **用户管理**：
  - ✅ 可添加用户并设置头像
  - ✅ 可切换用户角色
  - ✅ 每个用户的任务隔离

- [ ] **任务管理**：
  - ✅ 可添加、编辑、删除任务
  - ✅ 可标记完成/未完成
  - ✅ 可设置优先级（高/中/低）
  - ✅ 可分类任务（无限层级）
  - ✅ 可设置截止日期和提醒
  - ✅ 可分配任务给成员
  - ✅ 可添加任务描述和备注

- [ ] **团队协作**：
  - ✅ 团队视图可查看所有成员任务
  - ✅ 可按团队成员筛选任务
  - ✅ 可在任务下添加评论

- [ ] **统计功能**：
  - ✅ 月度任务完成率显示
  - ✅ 任务完成进度条（按周）
  - ✅ 可视化统计图表（饼图/柱状图）
  - ✅ 任务类型分布统计
  - ✅ 月度总结报告

- [ ] **目标管理**：
  - ✅ 可创建月度目标
  - ✅ 可关联任务到目标
  - ✅ 可追踪目标进度

### 🎨 界面验收

- [ ] UI 简约现代风格
- [ ] 响应式设计适配所有设备
- [ ] 颜色搭配和谐
- [ ] 操作流畅无卡顿
- [ ] 快捷键功能正常

### ⚡ 性能验收

- [ ] 页面加载时间 < 2秒
- [ ] 操作响应时间 < 300ms
- [ ] 自动保存无异常
- [ ] localStorage 数据持久化

### 🧪 浏览器兼容性

- [ ] Chrome / Edge（最新版本）
- [ ] Firefox（最新版本）
- [ ] Safari（最新版本）
- [ ] 移动端浏览器

---

## 5️⃣ 实施步骤

### Phase 1：基础架构（1-2天）
1. 创建项目结构
2. 初始化 HTML/CSS/JS
3. 实现用户管理模块
4. 设置 localStorage 数据结构

### Phase 2：任务管理（3-4天）
1. 实现任务 CRUD 功能
2. 添加优先级、分类、截止日期字段
3. 实现任务完成状态切换
4. 添加任务编辑和删除

### Phase 3：统计功能（2-3天）
1. 集成统计图表库（ECharts）
2. 实现月度任务完成率统计
3. 实现进度条和可视化
4. 实现任务类型分布

### Phase 4：团队协作（3-4天）
1. 实现团队视图模式
2. 实现任务分配功能
3. 实现团队成员筛选
4. 添加任务评论功能

### Phase 5：目标管理（2-3天）
1. 实现月度目标创建
2. 实现目标关联任务
3. 实现目标进度跟踪
4. 优化统计看板

### Phase 6：美化优化（2天）
1. 完善响应式设计
2. 添加快捷键支持
3. 优化用户体验
4. 添加加载动画

### Phase 7：测试验收（1-2天）
1. 功能测试
2. 用户体验测试
3. 性能优化
4. 修复 Bug

**总计：14-20个工作日**

---

## 6️⃣ 里程碑检查

| 里程碑 | 截止日期 | 状态 |
|--------|----------|------|
| **M1: 基础架构** | 第3天 | ⏳ |
| **M2: 任务管理** | 第7天 | ⏳ |
| **M3: 统计功能** | 第10天 | ⏳ |
| **M4: 团队协作** | 第14天 | ⏳ |
| **M5: 目标管理** | 第17天 | ⏳ |
| **M6: 测试验收** | 第20天 | ⏳ |

---

## 7️⃣ 交付物清单

### 代码文件
- [ ] `index.html` - 主页面
- [ ] `styles.css` - 样式表
- [ ] `app.js` - 应用逻辑
- [ ] `assets/` - 静态资源（图标）

### 文档文件
- [ ] `README.md` - 使用说明
- [ ] `API.md` - 数据格式说明
- [ ] `DEPLOY.md` - 部署指南（可选）

---

## 8️⃣ 用户手册（示例）

### 快速入门

1. **注册用户**：
   ```
   点击右上角设置图标 → 添加用户 → 设置用户名和头像
   ```

2. **创建任务**：
   ```
   点击"添加任务"按钮 → 输入任务内容 → 点击"添加"
   ```

3. **设置优先级**：
   ```
   任务卡片右侧 → 点击优先级图标（🔴/🟠/🟢）
   ```

4. **完成月度目标**：
   ```
   点击"月度目标"标签 → 创建目标 → 关联任务
   ```

5. **查看统计**：
   ```
   点击"统计看板" → 选择月份 → 查看进度和图表
   ```

### 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl/Cmd + N` | 添加任务 |
| `Ctrl/Cmd + /` | 搜索任务 |
| `Ctrl/Cmd + D` | 删除任务 |
| `Ctrl/Cmd + E` | 编辑任务 |

---

## 9️⃣ 进阶功能（可选）

如果时间充裕，可以考虑添加：

- [ ] 拖拽排序任务
- [ ] 任务提醒通知（Web Notifications API）
- [ ] 数据导出（CSV/PDF）
- [ ] 数据备份和恢复
- [ ] 多语言支持（i18n）
- [ ] 主题切换（暗色模式）

---

**文档版本**：v1.0
**最后更新**：2024年
**文档状态**：✅ 需求已明确，待实施